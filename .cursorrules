# Traverum Monorepo

## Project Overview
Traverum is a white-label booking platform that connects experience suppliers (tour operators, activity providers) with hotels, enabling hotels to sell local experiences to their guests and earn commission, while suppliers gain access to hotel customers without upfront marketing costs.

## Repository Structure
- apps/widget - Next.js 14 customer-facing booking widget (book.traverum.com)
- apps/dashboard - Vite+React supplier dashboard (dashboard.traverum.com)  
- packages/shared - Shared TypeScript types and utilities

## Tech Stack
- Payments: Stripe Connect
- Database: Supabase (PostgreSQL)

## Key Conventions
- All prices in cents, display as EUR (€)
- UUIDs for primary keys
- Booking ref format: TRV-XXXXXX
- European dates: DD.MM.YYYY - do not use english day or month names (except in calendar). use numbers like 01.01.2026. Calendar weeks should always start from monday. not sunday.
- 24-hour time format
- **Never use actual place names as placeholders** - Do not use place holder at all. If absolutely necessary, use general ones.
- **CRITICAL: Timezone handling for session date/time comparisons**: Session dates (`session_date`) and times (`start_time`) are stored in local timezone without timezone info. When comparing sessions to "now" to determine if they're upcoming/past:
  - **ALWAYS use `getTodayLocal()` and `isSessionUpcoming()` from `@/lib/date-utils`**
  - **NEVER use `new Date().toISOString()`** for date comparisons — it returns UTC, causing timezone bugs
  - Example: `import { getTodayLocal, isSessionUpcoming } from '@/lib/date-utils';` then `sessions.filter(s => isSessionUpcoming(s.session_date, s.start_time))`

## Design System
- Primary: Teal #0D9488
- Font: Poppins
- Style: Professional SaaS, shadcn/ui components

## Vercel Deployment (CRITICAL)
There are TWO separate Vercel projects. NEVER mix them up.

| Project | App | Framework | Root Directory | Domain |
|---------|-----|-----------|----------------|--------|
| **Dashboard** | apps/dashboard | Vite (React) | `apps/dashboard` | dashboard.traverum.com |
| **Widget** | apps/widget | Next.js 14 | `apps/widget` | book.traverum.com |

- Dashboard vercel.json lives in `apps/dashboard/vercel.json`
- Widget vercel.json lives in `apps/widget/vercel.json`
- NEVER deploy the widget to the dashboard Vercel project or vice versa
- Dashboard has NO Next.js dependency — if you see Next.js errors on dashboard, the wrong app is deployed

## When Making UI Changes
- when making UI/UX to dashboard, read our doc: C:\Traverum\traverum_v1\docs\design\dashboard-design-principles.md

## When Editing
- Keep Supabase types in sync across apps via @traverum/shared
- Widget handles customer booking flow
- Dashboard handles supplier and hotel management
- Both share same Supabase project
